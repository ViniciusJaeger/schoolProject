package com.alpdex.demo;

import javax.persistence.EntityManager;

import com.alpdex.dao.GraduationDao;
import com.alpdex.dao.TeacherDao;
import com.alpdex.entity.Graduation;
import com.alpdex.entity.Teacher;
import com.alpdex.utils.JPAUtil;

public class TeacherDemo {

	public static void insertTeacher() {
		
		Graduation graduation = new Graduation();
		Teacher pr = new Teacher();
		
		graduation.setName("Bachelor of Math");
		pr.setName("Marcos");
		pr.setAge(45);
		pr.setGraduation(graduation);
		
		EntityManager em = JPAUtil.getEntityManager();
		GraduationDao graduationDao = new GraduationDao(em);
		TeacherDao teacherDao = new TeacherDao(em);
		
		em.getTransaction().begin();
		
		graduationDao.insert(graduation);
		teacherDao.insert(pr);
				
		em.flush();
		em.clear();	
		
		pr = em.merge(pr);
		pr.setName("Ana");
		pr.setAge(43);
		pr.setGraduation(graduation);
		em.flush();
	}
}
